<!DOCTYPE html>
<html>
<head>
    <title>Add Entree</title>
    <link rel="stylesheet" href="../css/default.css" />
</head>
<body>
    <script src="../js/dbtools.js"></script>
    <script type="text/javascript">
        function restaurantList() {
            restaurantSelectList(
                function (res) { document.getElementById("rest_list").outerHTML = "<select onchange=\"locationList()\" name=\"rest_list\" id=\"rest_list\">" + res.responseText + "</select>"; }
                );
        }
        function locationList() {
            var name = document.getElementById("rest_list").value;
            locationSelectList(
                function (res) {
                    document.getElementById("loc_list").outerHTML = "<select name=\"loc_list\" id=\"loc_list\">" + res.responseText + "</select>";
                },
                name
                );
        }
        function submitNewEntree() {
            var name = document.getElementById("entree_name").value;
            var desc = document.getElementById("desc").value;
            var price = document.getElementById("price").value;
            var id = document.getElementById("loc_list").value;
			addEntree(submissionResponse, name, desc, price, id);
        }
		function submissionResponse(res) {
			if(res.responseText == "1") {
				document.getElementById("msg").innerText = "Hooray! You have a new item on the menu.";
			} else {
				document.getElementById("msg").innerText = "Sorry, but the entree was not added to the menu due to inadequate programming.";
			}
				
		}
    </script>
    <ul class="nav-bar">
        <li><a href="../php/restaurant_homepage.php">Home</a></li>
        <li><a href="../php/add_location.php">Add Location</a></li>
    </ul>
    <div class="usr-form">
        <form action="javascript:submitNewEntree()" method="post" id="add_entree_form">
            <table>
                <tr>
                    <td>Restaurant</td>
                    <td><select id="rest_list"></select></td>
                </tr>
                <tr>
                    <td>Location</td>
                    <td><select id="loc_list"></select></td>
                </tr>
                <tr>
                    <td>Entree Name</td>
                    <td>
                        <input type="text" name="entree_name" id="entree_name" placeholder="Enter a name for the entree..." />
                    </td>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>
                        <textarea name="description" placeholder="Enter a brief description of the entree..." rows="4" cols="50" maxlength="255" required form="add_entree_form" id="desc"></textarea>
                    </td>
                </tr>
                <tr>
                    <td>Price</td>
                    <td>
                        <input type="number" name="price" id="price" placeholder="Enter the price of the entree..." />
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <input type="submit" name="submit" value="Submit" />
                    </td>
                </tr>
            </table>
        </form>
    </div>
	<p id="msg"></p>
    <script>
        setRestId(); //sets rest_id cookie to the restaurant_id associated with user_id
        restaurantList(); //loads selection list with available restaurants
        locationList(); //loads selection list with available locations of given restaurant
    </script>
</body>
</html>